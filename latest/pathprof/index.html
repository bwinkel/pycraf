
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Path attenuation, terrain data, and geodesics (pycraf.pathprof) &#8212; pycraf v0.25.7dev50</title>
    <link rel="stylesheet" href="../_static/pycraf.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="annual_timepercent_from_worst_month" href="../api/pycraf.pathprof.annual_timepercent_from_worst_month.html" />
    <link rel="prev" title="saturation_water_pressure" href="../api/pycraf.atm.saturation_water_pressure.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">py</span><span id="logotext2">craf</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../api/pycraf.pathprof.annual_timepercent_from_worst_month.html" title="annual_timepercent_from_worst_month">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../api/pycraf.atm.saturation_water_pressure.html" title="saturation_water_pressure">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">pycraf v0.25.7dev50</a>
	 &#187;
      </li>
      
      <li>Path attenuation, terrain data, and geodesics (<code class="docutils literal notranslate"><span class="pre">pycraf.pathprof</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="path-attenuation-terrain-data-and-geodesics-pycraf-pathprof">
<h1>Path attenuation, terrain data, and geodesics (<a class="reference internal" href="#module-pycraf.pathprof" title="pycraf.pathprof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycraf.pathprof</span></code></a>)<a class="headerlink" href="#path-attenuation-terrain-data-and-geodesics-pycraf-pathprof" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#module-pycraf.pathprof" title="pycraf.pathprof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathprof</span></code></a> subpackage is probably the most important piece of
pycraf. It offers tools to calculate so-call path attenuation (propagation
loss), which is a key ingredient for compatibility studies in Radio spectrum
management. All kinds of Radio services have to cooperate and do their best to
not harm other users/services of the spectrum - neither in the allocated
spectral band, nor in the out-of-band or spurious domain (aka spectral
sidelobes). For this, it is fundamental to calculate the propagation loss that
a transmitted signal will experience before it is entering the receiving
terminal system.</p>
<p>There are a lot of parameters and environmental conditions that determine the
propagation loss, such as the frequency, <span class="math notranslate nohighlight">\(f\)</span>, of radiation, the distance,
<span class="math notranslate nohighlight">\(d\)</span>, between transmitter and receiver, the antenna gains and boresight
angles, but also the terrain along the propagating path. For close distances,
one often has the line-of-sight case, where the path loss is approximately
proportional to <span class="math notranslate nohighlight">\(d^{-2}f^{-2}\)</span> (numbers smaller than One, mean an
attenuation), i.e., the loss quickly gets larger with distance and frequency.
For longer separations, other effects start to play a more important role:</p>
<blockquote>
<div><ul class="simple">
<li>Tropospheric scatter loss</li>
<li>Ducting and anomalous layer refraction loss</li>
<li>Diffraction loss</li>
<li>Clutter loss</li>
</ul>
</div></blockquote>
<p>Especially, for diffraction loss, information on the terrain heights is
needed. Therefore, <code class="xref py py-obj docutils literal notranslate"><span class="pre">pycraf</span></code> implements functions to query
<code class="xref py py-obj docutils literal notranslate"><span class="pre">SRTM</span> <span class="pre">data</span></code>, which was obtained from
a space shuttle mission. SRTM data has high spatial resolution of 3” (90 m),
which makes it more than appropriate for path propagation calculations.</p>
<p>In order to calculate the overall path attenuation, pycraf follows the
algorithm proposed in <a class="reference external" href="https://www.itu.int/rec/R-REC-P.452-16-201507-I/en">ITU-R Recommendation P.452</a>. We refer the user
to this document to learn more about the details of such calculations,
because the matter is quite complex and beyond the scope of this user manual.</p>
<p>Several helper routines are necessary to collect the necessary parameters for
the P.452 calculations, that fall in the following categories:</p>
<blockquote>
<div><ul class="simple">
<li>Height profile (terrain map) construction.</li>
<li>Determination of Geodesics (the Great-circle path equivalent on the
Earth’s ellipsoid, the so-called Geoid).</li>
<li>Finding radiometerological data for the path’s midpoint, which is also
necessary to determine the effective Earth radii.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For most of the functionality in this module, you will need to download
SRTM tile data; see <a class="reference internal" href="working_with_srtm.html#working-with-srtm"><span class="std std-ref">Working with SRTM data</span></a>.</p>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<div class="section" id="height-profiles">
<span id="pathprof-getting-started-height-profile"></span><h3>Height profiles<a class="headerlink" href="#height-profiles" title="Permalink to this headline">¶</a></h3>
<p>Let’s start with querying <code class="xref py py-obj docutils literal notranslate"><span class="pre">SRTM</span> <span class="pre">data</span></code> and plot a height profile.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">pycraf</span> <span class="kn">import</span> <span class="n">pathprof</span>

<span class="c1"># allow download of missing SRTM data:</span>
<span class="n">pathprof</span><span class="o">.</span><span class="n">SrtmConf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">download</span><span class="o">=</span><span class="s1">&#39;missing&#39;</span><span class="p">)</span>

<span class="n">lon_t</span><span class="p">,</span> <span class="n">lat_t</span> <span class="o">=</span> <span class="mf">6.8836</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">50.525</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">lon_r</span><span class="p">,</span> <span class="n">lat_r</span> <span class="o">=</span> <span class="mf">7.3334</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">50.635</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">hprof_step</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span>

<span class="p">(</span>
    <span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span>
    <span class="n">distances</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span>
    <span class="n">bearing</span><span class="p">,</span> <span class="n">back_bearing</span><span class="p">,</span> <span class="n">back_bearings</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">srtm_height_profile</span><span class="p">(</span>
        <span class="n">lon_t</span><span class="p">,</span> <span class="n">lat_t</span><span class="p">,</span> <span class="n">lon_r</span><span class="p">,</span> <span class="n">lat_r</span><span class="p">,</span> <span class="n">hprof_step</span>
        <span class="p">)</span>

<span class="n">_distances</span> <span class="o">=</span> <span class="n">distances</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">km</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
<span class="n">_heights</span> <span class="o">=</span> <span class="n">heights</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">_distances</span><span class="p">,</span> <span class="n">_heights</span><span class="p">,</span> <span class="s1">&#39;k-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distance [km]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Height [m]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../pathprof/index-1.png">png</a>, <a class="reference external" href="../pathprof/index-1.svg">svg</a>, <a class="reference external" href="../pathprof/index-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-11.png" src="../_images/index-11.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the profile resolution, <code class="xref py py-obj docutils literal notranslate"><span class="pre">hprof_step</span></code> is made large,
Gaussian smoothing is applied to avoid aliasing effects.</p>
</div>
</div>
<div class="section" id="path-attenuation">
<span id="pathprof-getting-started-path-attenuation"></span><h3>Path attenuation<a class="headerlink" href="#path-attenuation" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#module-pycraf.pathprof" title="pycraf.pathprof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathprof</span></code></a> package implements <a class="reference external" href="https://www.itu.int/rec/R-REC-P.452-16-201507-I/en">ITU-R Recommendation P.452-16</a> for path propagation
loss calculations. In <a class="reference internal" href="#module-pycraf.pathprof" title="pycraf.pathprof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathprof</span></code></a> this is a two-step procedure.
First a helper object, a <code class="xref py py-obj docutils literal notranslate"><span class="pre">PathProf</span></code> object, has to be
instantiated. It contains all kinds of parameters that define the path
geometry and hold other necessary quantities (there are many!). Second, one
feeds this object into one of the functions that calculate attenuation</p>
<blockquote>
<div><ul class="simple">
<li>Line-of-sight (LoS) or free-space loss: <a class="reference internal" href="../api/pycraf.pathprof.loss_freespace.html#pycraf.pathprof.loss_freespace" title="pycraf.pathprof.loss_freespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_freespace</span></code></a></li>
<li>Tropospheric scatter loss: <a class="reference internal" href="../api/pycraf.pathprof.loss_troposcatter.html#pycraf.pathprof.loss_troposcatter" title="pycraf.pathprof.loss_troposcatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_troposcatter</span></code></a></li>
<li>Ducting and anomalous layer refraction loss:
<a class="reference internal" href="../api/pycraf.pathprof.loss_ducting.html#pycraf.pathprof.loss_ducting" title="pycraf.pathprof.loss_ducting"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_ducting</span></code></a></li>
<li>Diffraction loss: <a class="reference internal" href="../api/pycraf.pathprof.loss_diffraction.html#pycraf.pathprof.loss_diffraction" title="pycraf.pathprof.loss_diffraction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_diffraction</span></code></a></li>
</ul>
</div></blockquote>
<p>Of course, there is also a function (<a class="reference internal" href="../api/pycraf.pathprof.loss_complete.html#pycraf.pathprof.loss_complete" title="pycraf.pathprof.loss_complete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_complete</span></code></a>) to
calculate the total loss (a non-trivial combination of the above). As the
pathprof.complete_loss function also returns the most important constituents,
it is usually sufficient to use that. The individual functions are only
provided for reasons of computing speed, if one is really only interested in
one component:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="k">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pycraf</span> <span class="k">import</span> <span class="n">pathprof</span><span class="p">,</span> <span class="n">conversions</span> <span class="k">as</span> <span class="n">cnv</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathprof</span><span class="o">.</span><span class="n">SrtmConf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">download</span><span class="o">=</span><span class="s1">&#39;missing&#39;</span><span class="p">)</span>  

<span class="gp">&gt;&gt;&gt; </span><span class="n">freq</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">GHz</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">lon_tx</span><span class="p">,</span> <span class="n">lat_tx</span> <span class="o">=</span> <span class="mf">6.8836</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">50.525</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lon_rx</span><span class="p">,</span> <span class="n">lat_rx</span> <span class="o">=</span> <span class="mf">7.3334</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">50.635</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hprof_step</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span>  <span class="c1"># resolution of height profile</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">omega</span> <span class="o">=</span> <span class="mf">0.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">percent</span>  <span class="c1"># fraction of path over sea</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature</span> <span class="o">=</span> <span class="mf">290.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">K</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pressure</span> <span class="o">=</span> <span class="mf">1013.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">hPa</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_percent</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">percent</span>  <span class="c1"># see P.452 for explanation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h_tg</span><span class="p">,</span> <span class="n">h_rg</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="mi">50</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">G_t</span><span class="p">,</span> <span class="n">G_r</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">cnv</span><span class="o">.</span><span class="n">dBi</span><span class="p">,</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">cnv</span><span class="o">.</span><span class="n">dBi</span>

<span class="go"># clutter zones</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zone_t</span><span class="p">,</span> <span class="n">zone_r</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">CLUTTER</span><span class="o">.</span><span class="n">URBAN</span><span class="p">,</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">CLUTTER</span><span class="o">.</span><span class="n">SUBURBAN</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprop</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">PathProp</span><span class="p">(</span>  
<span class="gp">... </span>    <span class="n">freq</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">temperature</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lon_tx</span><span class="p">,</span> <span class="n">lat_tx</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">lon_rx</span><span class="p">,</span> <span class="n">lat_rx</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">h_tg</span><span class="p">,</span> <span class="n">h_rg</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">hprof_step</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">time_percent</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">zone_t</span><span class="o">=</span><span class="n">zone_t</span><span class="p">,</span> <span class="n">zone_r</span><span class="o">=</span><span class="n">zone_r</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
</pre></div>
</div>
<p>The PathProp object is immutable, so if you want to change something, you have
to create a new instance. This is, because, many member attributes are
dependent on each other and by just changing one value one could easily create
inconsistencies. It is easily possible to access the parameters:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">pprop</span><span class="p">))</span>  
<span class="go">PathProp&lt;Freq: 1.000 GHz&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">pprop</span><span class="p">)</span>  
<span class="go">version        :           16 (P.452 version; 14 or 16)</span>
<span class="go">freq           :     1.000000 GHz</span>
<span class="go">wavelen        :     0.299792 m</span>
<span class="go">polarization   :            0 (0 - horizontal, 1 - vertical)</span>
<span class="go">temperature    :   290.000000 K</span>
<span class="go">pressure       :  1013.000000 hPa</span>
<span class="go">time_percent   :     2.000000 percent</span>
<span class="go">beta0          :     1.954410 percent</span>
<span class="go">omega          :     0.000000 percent</span>
<span class="go">lon_t          :     6.883600 deg</span>
<span class="go">lat_t          :    50.525000 deg</span>
<span class="go">lon_r          :     7.333400 deg</span>
<span class="go">lat_r          :    50.635000 deg</span>
<span class="go">lon_mid        :     7.108712 deg</span>
<span class="go">lat_mid        :    50.580333 deg</span>
<span class="go">delta_N        :    38.080852 dimless / km</span>
<span class="go">N0             :   324.427961 dimless</span>
<span class="go">distance       :    34.128124 km</span>
<span class="go">bearing        :    68.815620 deg</span>
<span class="go">back_bearing   :  -110.836903 deg</span>
<span class="go">hprof_step     :   100.000000 m</span>
<span class="gp">...</span>

<span class="go"># path elevation angles as seen from Tx, Rx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.3f}</span><span class="s1"> </span><span class="si">{:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pprop</span><span class="o">.</span><span class="n">eps_pt</span><span class="p">,</span> <span class="n">pprop</span><span class="o">.</span><span class="n">eps_pr</span><span class="p">))</span>  
<span class="go">4.530 deg 1.883 deg</span>
</pre></div>
</div>
<p>With the PathProp object, it is now just one function call to get the path
loss:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tot_loss</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">loss_complete</span><span class="p">(</span><span class="n">pprop</span><span class="p">,</span> <span class="n">G_t</span><span class="p">,</span> <span class="n">G_r</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;L_bfsg:   </span><span class="si">{:5.2f}</span><span class="s1"> - Free-space loss</span><span class="se">\n</span><span class="s1">&#39;</span>  
<span class="gp">... </span>      <span class="s1">&#39;L_bd:     </span><span class="si">{:5.2f}</span><span class="s1"> - Basic transmission loss associated &#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;with diffraction</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;L_bs:     </span><span class="si">{:5.2f}</span><span class="s1"> - Tropospheric scatter loss</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;L_ba:     </span><span class="si">{:5.2f}</span><span class="s1"> - Ducting/layer reflection loss</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;L_b:      </span><span class="si">{:5.2f}</span><span class="s1"> - Complete path propagation loss</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;L_b_corr: </span><span class="si">{:5.2f}</span><span class="s1"> - As L_b but with clutter correction</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;L:        </span><span class="si">{:5.2f}</span><span class="s1"> - As L_b_corr but with gain &#39;</span>
<span class="gp">... </span>      <span class="s1">&#39;correction&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">tot_loss</span><span class="p">)</span>
<span class="gp">... </span>     <span class="p">)</span>
<span class="go">L_bfsg:   123.34 dB - Free-space loss</span>
<span class="go">L_bd:     173.73 dB - Basic transmission loss associated with diffraction</span>
<span class="go">L_bs:     225.76 dB - Tropospheric scatter loss</span>
<span class="go">L_ba:     212.81 dB - Ducting/layer reflection loss</span>
<span class="go">L_b:      173.73 dB - Complete path propagation loss</span>
<span class="go">L_b_corr: 192.94 dB - As L_b but with clutter correction</span>
<span class="go">L:        177.94 dB - As L_b_corr but with gain correction</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-pycraf-pathprof">
<h2>Using <a class="reference internal" href="#module-pycraf.pathprof" title="pycraf.pathprof"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pycraf.pathprof</span></code></a><a class="headerlink" href="#using-pycraf-pathprof" title="Permalink to this headline">¶</a></h2>
<div class="section" id="geodesics-height-profiles-and-terrain-maps">
<span id="pathprof-using-terrain"></span><h3>Geodesics, height profiles and terrain maps<a class="headerlink" href="#geodesics-height-profiles-and-terrain-maps" title="Permalink to this headline">¶</a></h3>
<p>In the <a class="reference internal" href="#pathprof-getting-started-height-profile"><span class="std std-ref">Height profiles</span></a> section, we have already
seen, how one can query a height profile from <code class="xref py py-obj docutils literal notranslate"><span class="pre">SRTM</span> <span class="pre">data</span></code>. It is also easy
to produce terrain maps of a region:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">pycraf</span> <span class="kn">import</span> <span class="n">pathprof</span>

<span class="n">pathprof</span><span class="o">.</span><span class="n">SrtmConf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">download</span><span class="o">=</span><span class="s1">&#39;missing&#39;</span><span class="p">)</span>

<span class="n">lon_t</span><span class="p">,</span> <span class="n">lat_t</span> <span class="o">=</span> <span class="mf">9.943</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">54.773</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>  <span class="c1"># Northern Germany</span>
<span class="n">map_size_lon</span><span class="p">,</span> <span class="n">map_size_lat</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">map_resolution</span> <span class="o">=</span> <span class="mf">3.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">arcsec</span>

<span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">heightmap</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">srtm_height_map</span><span class="p">(</span>
    <span class="n">lon_t</span><span class="p">,</span> <span class="n">lat_t</span><span class="p">,</span>
    <span class="n">map_size_lon</span><span class="p">,</span> <span class="n">map_size_lat</span><span class="p">,</span>
    <span class="n">map_resolution</span><span class="o">=</span><span class="n">map_resolution</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">_lons</span> <span class="o">=</span> <span class="n">lons</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
<span class="n">_lats</span> <span class="o">=</span> <span class="n">lats</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
<span class="n">_heightmap</span> <span class="o">=</span> <span class="n">heightmap</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>

<span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">170</span>
<span class="n">terrain_cmap</span><span class="p">,</span> <span class="n">terrain_norm</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">terrain_cmap_factory</span><span class="p">(</span>
    <span class="n">sealevel</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span>
    <span class="p">)</span>
<span class="n">_heightmap</span><span class="p">[</span><span class="n">_heightmap</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.51</span>  <span class="c1"># fix for coastal region</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
<span class="n">cbax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">.</span><span class="mo">02</span><span class="p">))</span>
<span class="n">cim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
    <span class="n">_heightmap</span><span class="p">,</span>
    <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="n">terrain_cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">terrain_norm</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
    <span class="n">extent</span><span class="o">=</span><span class="p">(</span><span class="n">_lons</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_lons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">_lats</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_lats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
    <span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span>
    <span class="n">cim</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cbax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span>
    <span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">_lons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">_lons</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_lats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">_lats</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Height (amsl)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">cbax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">cbax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
    <span class="n">t</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">t</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">t</span><span class="o">.</span><span class="n">label1On</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">t</span><span class="o">.</span><span class="n">label2On</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">ctics</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ctics</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="s1">&#39;{:.0f} m&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">ctics</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude [deg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude [deg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../pathprof/index-2.png">png</a>, <a class="reference external" href="../pathprof/index-2.svg">svg</a>, <a class="reference external" href="../pathprof/index-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-21.png" src="../_images/index-21.png" />
</div>
<p>Here, we made use of a special <code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code> colormap, which can be produced
using <a class="reference internal" href="../api/pycraf.pathprof.terrain_cmap_factory.html#pycraf.pathprof.terrain_cmap_factory" title="pycraf.pathprof.terrain_cmap_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">terrain_cmap_factory</span></code></a>. It returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">cmap</span></code> and a
<code class="xref py py-obj docutils literal notranslate"><span class="pre">norm</span></code>, which make it so that blue colors always start below a height of 0 m
(i.e., the sea level).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Internally, the height-profile generation with
<a class="reference internal" href="../api/pycraf.pathprof.srtm_height_profile.html#pycraf.pathprof.srtm_height_profile" title="pycraf.pathprof.srtm_height_profile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">srtm_height_profile</span></code></a> calls two Geodesics helper
functions provided in pycraf: <a class="reference internal" href="../api/pycraf.pathprof.geoid_inverse.html#pycraf.pathprof.geoid_inverse" title="pycraf.pathprof.geoid_inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geoid_inverse</span></code></a> and
<a class="reference internal" href="../api/pycraf.pathprof.geoid_direct.html#pycraf.pathprof.geoid_direct" title="pycraf.pathprof.geoid_direct"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geoid_direct</span></code></a>. They solve the “Geodesics problem” using
<a class="reference external" href="https://en.wikipedia.org/wiki/Vincenty's_formulae">Vincenty’s formulae</a>.
The underlying method is based on an iterative approach
and is used to find the distance and relative bearings between two points
(P1, and P2) on the Geoid (Earth ellipsoid), or - if P1, the bearing, and
distance are given -, it finds P2. The geodesics are the equivalent of
great-circle paths on a sphere, but on the Geoid.</p>
</div>
<p>Another useful feature of the Geodesics functionality is that one can query
the Geographical coordinates of points at a certain distance from a central
point. On the sphere, they would all be located on a circle, but on Earth
it’s different:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">pycraf</span> <span class="kn">import</span> <span class="n">pathprof</span><span class="p">,</span> <span class="n">geometry</span>

<span class="n">lon</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mi">70</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">bearings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">721</span><span class="p">)</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">distance</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">km</span>

<span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">geoid_direct</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">bearings</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
<span class="n">ang_dist</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">true_angular_distance</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">))</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">))</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">lons</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">),</span> <span class="n">lats</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">),</span>
    <span class="n">c</span><span class="o">=</span><span class="n">ang_dist</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span>
    <span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Angular distance [deg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude [deg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude [deg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">70</span><span class="p">)))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../pathprof/index-3.png">png</a>, <a class="reference external" href="../pathprof/index-3.svg">svg</a>, <a class="reference external" href="../pathprof/index-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-32.png" src="../_images/index-32.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make no mistake, the apparent distortion mostly comes from projecting the
“sphere” to a flat projection. However, if one calculates the angular
distances with the formula for the sphere, there is some deviation
(from North to South). For many cases where only rough estimates are
needed it will be sufficient to treat the Geoid as a normal sphere.</p>
</div>
</div>
<div class="section" id="producing-maps-of-path-propagation-loss">
<span id="pathprof-using-attenmaps"></span><h3>Producing maps of path propagation loss<a class="headerlink" href="#producing-maps-of-path-propagation-loss" title="Permalink to this headline">¶</a></h3>
<p>Often it is desired to generate maps of path attenuation values, e.g., to
quickly determine regions where the necessary separations between a
potential interferer and the victim terminal would be too small, potentially
leading to radio frequency interference (RFI).</p>
<p>The simple approach would be to create a <a class="reference internal" href="../api/pycraf.pathprof.PathProp.html#pycraf.pathprof.PathProp" title="pycraf.pathprof.PathProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PathProp</span></code></a> instance
for each pixel in the desired region (with the Tx being in the center of the map, and the Rx located at the other map pixels) and run the <a class="reference internal" href="../api/pycraf.pathprof.loss_complete.html#pycraf.pathprof.loss_complete" title="pycraf.pathprof.loss_complete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_complete</span></code></a> function accordingly. This is relatively slow.
Therefore, we added a faster alternative, <a class="reference internal" href="../api/pycraf.pathprof.atten_map_fast.html#pycraf.pathprof.atten_map_fast" title="pycraf.pathprof.atten_map_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_map_fast</span></code></a>. The idea is to generate the full height profiles only for the pixels on the map edges and re-use the arrays for the inner pixels with a clever hashing algorithm. The details of this are encapsulated in the <a class="reference internal" href="../api/pycraf.pathprof.height_map_data.html#pycraf.pathprof.height_map_data" title="pycraf.pathprof.height_map_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">height_map_data</span></code></a> function, such that the user doesn’t need to understand what’s going on under the hood:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span> <span class="nn">pycraf</span> <span class="kn">import</span> <span class="n">pathprof</span><span class="p">,</span> <span class="n">conversions</span> <span class="k">as</span> <span class="n">cnv</span>


<span class="k">def</span> <span class="nf">plot_atten_map</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">total_atten</span><span class="p">):</span>

    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">195</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
    <span class="n">cbax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">.</span><span class="mo">02</span><span class="p">))</span>
    <span class="n">cim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">total_atten</span><span class="p">,</span>
        <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;inferno_r&#39;</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">extent</span><span class="o">=</span><span class="p">(</span><span class="n">lons</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lats</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">)</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span>
        <span class="n">cim</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cbax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span>
        <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">lons</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">lons</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lats</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">lats</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Path propagation loss&#39;</span><span class="p">)</span>
    <span class="n">ctics</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">ctics</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="s1">&#39;{:.0f} dB&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">ctics</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Longitude [deg]&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Latitude [deg]&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pathprof</span><span class="o">.</span><span class="n">SrtmConf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">download</span><span class="o">=</span><span class="s1">&#39;missing&#39;</span><span class="p">)</span>

<span class="n">lon_tx</span><span class="p">,</span> <span class="n">lat_tx</span> <span class="o">=</span> <span class="mf">6.88361</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">50.52483</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">map_size_lon</span><span class="p">,</span> <span class="n">map_size_lat</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span>
<span class="n">map_resolution</span> <span class="o">=</span> <span class="mf">10.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">arcsec</span>

<span class="n">freq</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">GHz</span>
<span class="n">omega</span> <span class="o">=</span> <span class="mf">0.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">percent</span>  <span class="c1"># fraction of path over sea</span>
<span class="n">temperature</span> <span class="o">=</span> <span class="mf">290.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">K</span>
<span class="n">pressure</span> <span class="o">=</span> <span class="mf">1013.</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">hPa</span>
<span class="n">timepercent</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">percent</span>  <span class="c1"># see P.452 for explanation</span>
<span class="n">h_tg</span><span class="p">,</span> <span class="n">h_rg</span> <span class="o">=</span> <span class="mi">50</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span>
<span class="n">G_t</span><span class="p">,</span> <span class="n">G_r</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">cnv</span><span class="o">.</span><span class="n">dBi</span><span class="p">,</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">cnv</span><span class="o">.</span><span class="n">dBi</span>
<span class="n">zone_t</span><span class="p">,</span> <span class="n">zone_r</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">CLUTTER</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">,</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">CLUTTER</span><span class="o">.</span><span class="n">UNKNOWN</span>
<span class="n">hprof_step</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">m</span>

<span class="n">hprof_cache</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">height_map_data</span><span class="p">(</span>
    <span class="n">lon_tx</span><span class="p">,</span> <span class="n">lat_tx</span><span class="p">,</span>
    <span class="n">map_size_lon</span><span class="p">,</span> <span class="n">map_size_lat</span><span class="p">,</span>
    <span class="n">map_resolution</span><span class="o">=</span><span class="n">map_resolution</span><span class="p">,</span>
    <span class="n">zone_t</span><span class="o">=</span><span class="n">zone_t</span><span class="p">,</span> <span class="n">zone_r</span><span class="o">=</span><span class="n">zone_r</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># dict-like</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">pathprof</span><span class="o">.</span><span class="n">atten_map_fast</span><span class="p">(</span>
    <span class="n">freq</span><span class="p">,</span>
    <span class="n">temperature</span><span class="p">,</span>
    <span class="n">pressure</span><span class="p">,</span>
    <span class="n">h_tg</span><span class="p">,</span> <span class="n">h_rg</span><span class="p">,</span>
    <span class="n">timepercent</span><span class="p">,</span>
    <span class="n">hprof_cache</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">lons</span> <span class="o">=</span> <span class="n">hprof_cache</span><span class="p">[</span><span class="s1">&#39;xcoords&#39;</span><span class="p">]</span>
<span class="n">lats</span> <span class="o">=</span> <span class="n">hprof_cache</span><span class="p">[</span><span class="s1">&#39;ycoords&#39;</span><span class="p">]</span>
<span class="c1"># index 4 is total loss without clutter/gain included:</span>
<span class="n">total_atten</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s1">&#39;L_b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>

<span class="n">plot_atten_map</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">total_atten</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../pathprof/index-4_01_00.png">png</a>, <a class="reference external" href="../pathprof/index-4_01_00.svg">svg</a>, <a class="reference external" href="../pathprof/index-4_01_00.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-4_01_00.png" src="../_images/index-4_01_00.png" />
</div>
<p>For a more illustrative example, have a look at the Jupyter <a class="reference external" href="https://github.com/bwinkel/pycraf/tree/master/notebooks/03c_attenuation_maps.ipynb">tutorial notebook</a>
on this topic.</p>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://docs.astropy.org/en/stable/units/index.html">Astropy Units and Quantities package</a>, which is used extensively in pycraf.</li>
<li><a class="reference external" href="https://www.itu.int/rec/R-REC-P.452-16-201507-I/en">ITU-R Recommendation P.452-16</a></li>
</ul>
</div>
<div class="section" id="reference-api">
<h2>Reference/API<a class="headerlink" href="#reference-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pycraf.pathprof">
<span id="pycraf-pathprof-package"></span><h3>pycraf.pathprof Package<a class="headerlink" href="#module-pycraf.pathprof" title="Permalink to this headline">¶</a></h3>
<p>Contains functions to construct height profiles and terrain maps from <a class="reference external" href="https://www2.jpl.nasa.gov/srtm/">SRTM</a> data, calculate shortest path on the
Geoid - so-called geodesics -, and perform path propagation/attenuation
estimation.</p>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.annual_timepercent_from_worst_month.html#pycraf.pathprof.annual_timepercent_from_worst_month" title="pycraf.pathprof.annual_timepercent_from_worst_month"><code class="xref py py-obj docutils literal notranslate"><span class="pre">annual_timepercent_from_worst_month</span></code></a>(p_w,&nbsp;…)</td>
<td>Calculate annual equivalent time percentage, p, from worst-month time percentage, p_w, according to ITU-R P.452-16 Eq (1).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.atten_map_fast.html#pycraf.pathprof.atten_map_fast" title="pycraf.pathprof.atten_map_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_map_fast</span></code></a>(freq,&nbsp;temperature,&nbsp;pressure,&nbsp;…)</td>
<td>Calculate attenuation maps using a fast method.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.atten_path_fast.html#pycraf.pathprof.atten_path_fast" title="pycraf.pathprof.atten_path_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_path_fast</span></code></a>(freq,&nbsp;temperature,&nbsp;pressure,&nbsp;…)</td>
<td>Calculate attenuation along a path using a parallelized method.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.clutter_correction.html#pycraf.pathprof.clutter_correction" title="pycraf.pathprof.clutter_correction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clutter_correction</span></code></a>(h_g,&nbsp;zone,&nbsp;freq)</td>
<td>Calculate the Clutter loss of a propagating radio wave according to ITU-R P.452-16 Eq (57).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.clutter_imt.html#pycraf.pathprof.clutter_imt" title="pycraf.pathprof.clutter_imt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clutter_imt</span></code></a>(freq,&nbsp;dist,&nbsp;location_percent[,&nbsp;…])</td>
<td>Calculate the Clutter loss according to IMT.CLUTTER document (method 2).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.deltaN_N0_from_map.html#pycraf.pathprof.deltaN_N0_from_map" title="pycraf.pathprof.deltaN_N0_from_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deltaN_N0_from_map</span></code></a>(lon,&nbsp;lat)</td>
<td>Query delta_N and N_0 values from digitized maps by means of bilinear interpolation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.eff_earth_radius_beta.html#pycraf.pathprof.eff_earth_radius_beta" title="pycraf.pathprof.eff_earth_radius_beta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eff_earth_radius_beta</span></code></a>()</td>
<td>Calculate effective Earth radius exceeded for beta_0 percent of time, a_beta, according to ITU-R P.452-16 Eq (6b).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.eff_earth_radius_factor_beta.html#pycraf.pathprof.eff_earth_radius_factor_beta" title="pycraf.pathprof.eff_earth_radius_factor_beta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eff_earth_radius_factor_beta</span></code></a>()</td>
<td>Calculate effective Earth radius factor exceeded for beta_0 percent of time, k_beta, according to ITU-R P.452-16.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.eff_earth_radius_factor_median.html#pycraf.pathprof.eff_earth_radius_factor_median" title="pycraf.pathprof.eff_earth_radius_factor_median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eff_earth_radius_factor_median</span></code></a>(lon,&nbsp;lat)</td>
<td>Calculate median effective Earth radius factor, k_50, according to ITU-R P.452-16 Eq (5).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.eff_earth_radius_median.html#pycraf.pathprof.eff_earth_radius_median" title="pycraf.pathprof.eff_earth_radius_median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eff_earth_radius_median</span></code></a>(lon,&nbsp;lat)</td>
<td>Calculate median effective Earth radius, a_e, according to ITU-R P.452-16 Eq (6a).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.geoid_area.html#pycraf.pathprof.geoid_area" title="pycraf.pathprof.geoid_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geoid_area</span></code></a>(lon1,&nbsp;lon2,&nbsp;lat1,&nbsp;lat2)</td>
<td>Calculate WGS84 surface area over interval [lon1, lon2] and [lat1, lat2].</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.geoid_direct.html#pycraf.pathprof.geoid_direct" title="pycraf.pathprof.geoid_direct"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geoid_direct</span></code></a>(lon1,&nbsp;lat1,&nbsp;bearing1,&nbsp;dist[,&nbsp;…])</td>
<td>Solve direct Geodesics problem using Vincenty’s formulae.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.geoid_inverse.html#pycraf.pathprof.geoid_inverse" title="pycraf.pathprof.geoid_inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">geoid_inverse</span></code></a>(lon1,&nbsp;lat1,&nbsp;lon2,&nbsp;lat2[,&nbsp;eps,&nbsp;…])</td>
<td>Solve inverse Geodesics problem using Vincenty’s formulae.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.height_map_data.html#pycraf.pathprof.height_map_data" title="pycraf.pathprof.height_map_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">height_map_data</span></code></a>(lon_t,&nbsp;lat_t,&nbsp;map_size_lon,&nbsp;…)</td>
<td>Calculate height profiles and auxillary maps needed for <a class="reference internal" href="../api/pycraf.pathprof.atten_map_fast.html#pycraf.pathprof.atten_map_fast" title="pycraf.pathprof.atten_map_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_map_fast</span></code></a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.height_path_data.html#pycraf.pathprof.height_path_data" title="pycraf.pathprof.height_path_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">height_path_data</span></code></a>(lon_t,&nbsp;lat_t,&nbsp;lon_r,&nbsp;lat_r,&nbsp;…)</td>
<td>Calculate height profile auxillary data needed for <a class="reference internal" href="../api/pycraf.pathprof.atten_path_fast.html#pycraf.pathprof.atten_path_fast" title="pycraf.pathprof.atten_path_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_path_fast</span></code></a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.height_path_data_generic.html#pycraf.pathprof.height_path_data_generic" title="pycraf.pathprof.height_path_data_generic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">height_path_data_generic</span></code></a>(distance,&nbsp;step,&nbsp;…)</td>
<td>Calculate height profile auxillary data needed for <a class="reference internal" href="../api/pycraf.pathprof.atten_path_fast.html#pycraf.pathprof.atten_path_fast" title="pycraf.pathprof.atten_path_fast"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atten_path_fast</span></code></a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.loss_complete.html#pycraf.pathprof.loss_complete" title="pycraf.pathprof.loss_complete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_complete</span></code></a>(pathprop[,&nbsp;G_t,&nbsp;G_r])</td>
<td>Calculate the total loss of a propagating radio wave according to ITU-R P.452-16 Eq (58-64).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.loss_diffraction.html#pycraf.pathprof.loss_diffraction" title="pycraf.pathprof.loss_diffraction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_diffraction</span></code></a>(pathprop)</td>
<td>Calculate the Diffraction loss of a propagating radio wave according to ITU-R P.452-16 Eq (14-44).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.loss_ducting.html#pycraf.pathprof.loss_ducting" title="pycraf.pathprof.loss_ducting"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_ducting</span></code></a>(pathprop)</td>
<td>Calculate the ducting/layer reflection loss, L_ba, of a propagating radio wave according to ITU-R P.452-16 Eq (46-56).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.loss_freespace.html#pycraf.pathprof.loss_freespace" title="pycraf.pathprof.loss_freespace"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_freespace</span></code></a>(pathprop)</td>
<td>Calculate the free-space loss, L_bfsg, of a propagating radio wave according to ITU-R P.452-16 Eq (8-12).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.loss_troposcatter.html#pycraf.pathprof.loss_troposcatter" title="pycraf.pathprof.loss_troposcatter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loss_troposcatter</span></code></a>(pathprop[,&nbsp;G_t,&nbsp;G_r])</td>
<td>Calculate the tropospheric scatter loss, L_bs, of a propagating radio wave according to ITU-R P.452-16 Eq (45).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.make_kmz.html#pycraf.pathprof.make_kmz" title="pycraf.pathprof.make_kmz"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_kmz</span></code></a>(kmz_filename,&nbsp;atten_map,&nbsp;bbox[,&nbsp;…])</td>
<td>Produce kmz file for use in GIS software (e.g., Google Earth).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.radiomet_data_for_pathcenter.html#pycraf.pathprof.radiomet_data_for_pathcenter" title="pycraf.pathprof.radiomet_data_for_pathcenter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">radiomet_data_for_pathcenter</span></code></a>(lon,&nbsp;lat,&nbsp;d_tm,&nbsp;…)</td>
<td>Calculate delta_N, beta_0, and N_0 values from digitized maps, according to ITU-R P.452-16 Eq (2-4).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.set_num_threads.html#pycraf.pathprof.set_num_threads" title="pycraf.pathprof.set_num_threads"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_num_threads</span></code></a>(int&nbsp;nthreads)</td>
<td>Change maximum number of threads to use.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.srtm_height_data.html#pycraf.pathprof.srtm_height_data" title="pycraf.pathprof.srtm_height_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">srtm_height_data</span></code></a>(lons,&nbsp;lats)</td>
<td>Interpolated SRTM terrain data extracted from “.hgt” files.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.srtm_height_map.html#pycraf.pathprof.srtm_height_map" title="pycraf.pathprof.srtm_height_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">srtm_height_map</span></code></a>(lon_c,&nbsp;lat_c,&nbsp;map_size_lon,&nbsp;…)</td>
<td>Extract terrain map from SRTM data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.srtm_height_profile.html#pycraf.pathprof.srtm_height_profile" title="pycraf.pathprof.srtm_height_profile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">srtm_height_profile</span></code></a>(lon_t,&nbsp;lat_t,&nbsp;lon_r,&nbsp;…)</td>
<td>Extract a height profile from SRTM data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.terrain_cmap_factory.html#pycraf.pathprof.terrain_cmap_factory" title="pycraf.pathprof.terrain_cmap_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">terrain_cmap_factory</span></code></a>([sealevel,&nbsp;vmax])</td>
<td>Produce terrain colormap and norm to be used in plt.imshow.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="classes">
<h4>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h4>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal notranslate"><span class="pre">CLUTTER</span></code></td>
<td>Clutter types are defined according to <a class="reference external" href="https://www.itu.int/rec/R-REC-P.452-16-201507-I/en">ITU-R Recommendation P.452-16</a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.PathProp.html#pycraf.pathprof.PathProp" title="pycraf.pathprof.PathProp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PathProp</span></code></a>(freq,&nbsp;temperature,&nbsp;pressure,&nbsp;lon_t,&nbsp;…)</td>
<td>Container class that holds all path profile properties.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.SrtmConf.html#pycraf.pathprof.SrtmConf" title="pycraf.pathprof.SrtmConf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrtmConf</span></code></a>()</td>
<td>Provide a global state to adjust SRTM configuration.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="variables">
<h4>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h4>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.A_BETA.html#pycraf.pathprof.A_BETA" title="pycraf.pathprof.A_BETA"><code class="xref py py-obj docutils literal notranslate"><span class="pre">A_BETA</span></code></a></td>
<td>Effective Earth radius for beta_0 percent</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../api/pycraf.pathprof.K_BETA.html#pycraf.pathprof.K_BETA" title="pycraf.pathprof.K_BETA"><code class="xref py py-obj docutils literal notranslate"><span class="pre">K_BETA</span></code></a></td>
<td>Effective Earth radius factor for beta_0 percent</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/pycraf.pathprof.R_E.html#pycraf.pathprof.R_E" title="pycraf.pathprof.R_E"><code class="xref py py-obj docutils literal notranslate"><span class="pre">R_E</span></code></a></td>
<td>Earth Radius</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="available-clutter-types">
<h3>Available clutter types<a class="headerlink" href="#available-clutter-types" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="59%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Alias</th>
<th class="head"><span class="math notranslate nohighlight">\(h_\mathrm{a}~[\mathrm{m}]\)</span></th>
<th class="head"><span class="math notranslate nohighlight">\(d_\mathrm{k}~[\mathrm{m}]\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-1</td>
<td>CLUTTER.UNKNOWN</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>0</td>
<td>CLUTTER.SPARSE</td>
<td>4</td>
<td>100</td>
</tr>
<tr class="row-even"><td>1</td>
<td>CLUTTER.VILLAGE</td>
<td>5</td>
<td>70</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>CLUTTER.DECIDIOUS_TREES</td>
<td>15</td>
<td>50</td>
</tr>
<tr class="row-even"><td>3</td>
<td>CLUTTER.CONIFEROUS_TREES</td>
<td>20</td>
<td>50</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>CLUTTER.TROPICAL_FOREST</td>
<td>20</td>
<td>30</td>
</tr>
<tr class="row-even"><td>5</td>
<td>CLUTTER.SUBURBAN</td>
<td>9</td>
<td>25</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>CLUTTER.DENSE_SUBURBAN</td>
<td>12</td>
<td>20</td>
</tr>
<tr class="row-even"><td>7</td>
<td>CLUTTER.URBAN</td>
<td>20</td>
<td>20</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>CLUTTER.DENSE_URBAN</td>
<td>25</td>
<td>20</td>
</tr>
<tr class="row-even"><td>9</td>
<td>CLUTTER.HIGH_URBAN</td>
<td>35</td>
<td>20</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>CLUTTER.INDUSTRIAL_ZONE</td>
<td>20</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Path attenuation, terrain data, and geodesics (<code class="docutils literal notranslate"><span class="pre">pycraf.pathprof</span></code>)</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#height-profiles">Height profiles</a></li>
<li><a class="reference internal" href="#path-attenuation">Path attenuation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-pycraf-pathprof">Using <code class="docutils literal notranslate"><span class="pre">pycraf.pathprof</span></code></a><ul>
<li><a class="reference internal" href="#geodesics-height-profiles-and-terrain-maps">Geodesics, height profiles and terrain maps</a></li>
<li><a class="reference internal" href="#producing-maps-of-path-propagation-loss">Producing maps of path propagation loss</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
<li><a class="reference internal" href="#reference-api">Reference/API</a><ul>
<li><a class="reference internal" href="#module-pycraf.pathprof">pycraf.pathprof Package</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#available-clutter-types">Available clutter types</a></li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/bwinkel/pycraf/tree/master/docs/pathprof/index.rst">Edit This Page on Github</a> &nbsp;
    <a href="../_sources/pathprof/index.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2018, Benjamin Winkel.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.4. &nbsp;
    Last built 09 May 2018. <br/>
  </p>
</footer>
  </body>
</html>